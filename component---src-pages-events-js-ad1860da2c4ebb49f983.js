(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,a,u,c){try{var o=e[u](c),i=o.value}catch(l){return void n(l)}o.done?t(i):Promise.resolve(i).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,u){var c=e.apply(t,n);function o(e){r(c,a,u,o,i,"next",e)}function i(e){r(c,a,u,o,i,"throw",e)}o(void 0)}))}}n.d(t,"a",(function(){return a}))},PjpU:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o}));var r=function(e){var t,n;return!(null==e||null===(t=e.roles)||void 0===t||!t.admin)||!(null==e||null===(n=e.roles)||void 0===n||!n.eboard)},a=function(e){var t;return!(null==e||null===(t=e.roles)||void 0===t||!t.recruitmentteam)},u=function(e){var t;return!(null==e||null===(t=e.roles)||void 0===t||!t.applicant)},c=function(e){return!!e},o=function(e){var t;return!(null==e||null===(t=e.roles)||void 0===t||!t.upemember)}},UV5A:function(e,t,n){"use strict";n.r(t);var r=n("HaE+"),a=n("o0o1"),u=n.n(a),c=n("q1tI"),o=n.n(c),i=n("eHHv"),l=n("f4B5"),s=n("yTmA"),f=n("EYWl"),d=n("kT3S"),m=n("K3lz"),v=n("PjpU");t.default=Object(i.a)(l.a,Object(s.withAuthorization)(v.c),s.withFirebase)((function(e){var t=e.firebase,n=Object(c.useState)(null),a=n[0],i=n[1],l=Object(c.useState)(""),v=l[0],h=l[1],b=Object(c.useState)(!0),p=b[0],E=b[1],w=Object(c.useState)(!1),g=w[0],k=w[1],y=Object(c.useContext)(s.AuthUserContext);if(Object(c.useEffect)((function(){k(!0);var e=new URL(window.location.href).searchParams.get("code");t&&""!==e&&t.recruitmentEvent(e).get().then((function(t){t.exists?(i(Object.assign({},t.data(),{uid:t.id})),h(e)):(h(e),k(!1))})).catch((function(e){console.log("Error in loading event!"),k(!1)}))}),[t]),Object(c.useEffect)((function(){if(t&&a&&y)try{t.firestore.runTransaction(function(){var e=Object(r.a)(u.a.mark((function e(n){var r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.recruitmentEvent(a.uid),e.next=3,n.get(r);case 3:(c=e.sent).exists&&(Object.assign({},c.data()),o={},y.roles.upemember?o["upeAttendance."+y.uid]=y.name:o["attendance."+y.uid]=y.name,n.update(r,o),E(!0)),k(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){console.error("Transaction failure!",e),k(!1)}}),[a,t,y]),g)return o.a.createElement(d.a,null);if(!y)return o.a.createElement(m.b,{name:"Events",text:"You seem to have entered this page without logging in, please wait while we authenticate you so you can continue onwards!",displayBack:!0});var j=function(){return v?a?p?o.a.createElement(m.b,{name:"Events",text:"You successfully checked-in for "+a.title+"! Thank you so much for attending!",displayBack:!0}):o.a.createElement(m.b,{name:"Events",text:"You were unsuccessful in checking-in for "+a.title+"! Please reach out to a member of EBoard!",displayBack:!0}):o.a.createElement(m.b,{name:"Events",text:"Unable to fetch the proper event to check-in! Please reach out to a member of EBoard!",displayBack:!0}):o.a.createElement(m.b,{name:"Events",text:"You seem to have entered this page without a proper Event Link! Please return return back to the Home Page by clicking above!",displayBack:!0})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{title:"Events",route:"/events"}),o.a.createElement(j,null),o.a.createElement("br",null),o.a.createElement("br",null))}))}}]);
//# sourceMappingURL=component---src-pages-events-js-ad1860da2c4ebb49f983.js.map