(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{syWp:function(e,t,a){"use strict";a.r(t);var n=a("HaE+"),i=a("dI71"),r=(a("ToJy"),a("o0o1")),o=a.n(r),l=a("q1tI"),s=a.n(l),u=a("eHHv"),c=a("ZCxb"),p=a.n(c),d=a("QojX"),f=a("yTmA"),m=a("f4B5"),h=a("PjpU"),y=a("kT3S"),b=a("K3lz"),v=a("EYWl"),g=a("lEpx"),w=function(e){0===e.files.length?(e.setCustomValidity("You must upload a file!"),p()("Uh oh!","You must upload a file!","error")):e.files.length>1?(e.setCustomValidity("You can only upload 1 file!"),p()("Uh oh!","You can only upload 1 file!","error")):e.files[0].size>1048576?(e.setCustomValidity("Max file size is 1MB!"),e.value="",p()("Uh oh!","Max file size is 1MB!","error")):e.setCustomValidity("")},x=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._initFirebase=!1,t.state={applicationFormConfig:null,initialApplicationData:null,loading:!0,validated:!1,sending:!1,submitted:!1},t.loadData=Object(n.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._initFirebase=!0,a=t.props.firebase.applicationFormConfig().get().then((function(e){return e.data()})).catch((function(){return t.setState({loading:!1})})),n=t.props.firebase.application(t.context.uid).get().then((function(e){return e.exists?e.data():null})).catch((function(){return t.setState({loading:!1})})),Promise.all([a,n]).then((function(e){var a=e[0],n=e[1];return t.setState({loading:!1,applicationFormConfig:a,initialApplicationData:n})}));case 4:case"end":return e.stop()}}),e)}))),t}Object(i.a)(t,e);var r=t.prototype;return r.componentDidMount=function(){this.props.firebase&&!this._initFirebase&&this.loadData()},r.componentDidUpdate=function(e){this.props.firebase&&!this._initFirebase&&this.loadData(),"undefined"!=typeof window&&a.e(5).then(a.t.bind(null,"5buq",7)).then((function(e){e.init()}))},r.render=function(){var e=this,t=this.state,a=t.loading,i=t.submitted,r=t.validated,l=t.applicationFormConfig,u=t.sending;if(a)return s.a.createElement(y.a,null);if(this.context.roles.hasOwnProperty("denyListed")&&this.context.roles.denyListed||this.context.roles.hasOwnProperty("upemember")&&this.context.roles.upemember||this.context.roles.hasOwnProperty("provisionalMember")&&this.context.roles.provisionalMember)return s.a.createElement(s.a.Fragment,null,s.a.createElement(b.b,{name:"Your Application",text:"Unfortunately you are not eligible to apply to Upsilon PI Epsilon. If you think this is a mistake, or want further information on the situation, please contact our EBoard at upe@bu.edu.",displayBack:!0}));if(!this.props.settings.applicationsOpen)return s.a.createElement(b.b,{name:"Your Application",text:"Unfortunately, the application for the "+l.semester+" season has closed. If you're interesting in joining BU UPE, please come back next semester and apply, we'd love to have you!",displayBack:!0});var c=function(){var t=Object(n.a)(o.a.mark((function t(a){var n,i,r,l,s,u,c,d,f,m,h,y,b,v,g,x,E,k,A,C;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.props.settings.applicationsOpen){t.next=4;break}return p()("Uh oh!","Applications are closed! Not sure how you got here, but unfortunately we can't submit this for you as applications have closed.","error"),t.abrupt("return");case 4:if(n=a.currentTarget,(i=Array.from(n.querySelectorAll(".custom-file-input"))).forEach((function(e){return w(e)})),!1!==n.checkValidity()){t.next=11;break}a.stopPropagation(),t.next=30;break;case 11:return e.setState({sending:!0}),r=Array.from(n.querySelectorAll(".form-control")),l=Array.from(n.querySelectorAll(".custom-radio>.custom-control-input")).filter((function(e){return e.checked})),s=e.state.applicationFormConfig,u=s.semester,c=s.questions,d=e.context,f=d.uid,(m=d.roles).applicant=!0,v=r.map((function(e){var t=e.id,a=e.value,n=t;"name"===n?(h=a.split(" ")[0],b=a):"email"===n&&(y=a);var i=c.find((function(e){return e.uid===n})),r=i.name,o=i.order,l=i.type;return{uid:n,value:a,name:r,order:o,type:l}})),g=l.map((function(e){var t=e.name,a=e.value,n=t,i="true"==a,r=c.find((function(e){return e.uid===n})),o=r.name,l=r.order,s=r.type;return{uid:n,value:i,name:o,order:l,type:s}})),x=i.map((function(t){return new Promise((function(a,n){var i=t.id.split("-").pop();e.props.firebase.file(f,i).put(t.files[0]).then((function(e){return e.ref.getDownloadURL()})).then((function(e){var t=c.find((function(e){return e.uid===i})),n=t.name,r=t.order,o=t.type;return a({uid:i,value:e,name:n,order:r,type:o})}))}))})),t.next=22,Promise.all(x);case 22:return E=t.sent,v=v.concat(E).concat(g),k=e.props.firebase.application(f).set({responses:v,semester:u,deliberation:{accepted:!1,confirmed:!1,feedback:"",votes:{}},interview:{interviewed:!1}}),A=e.props.firebase.user(f).update({roles:m,name:b,profileIMG:""}),C=e.props.firebase.sendApplicationReceipt({email:y,firstName:h}),t.next=29,Promise.all([k,A,C]);case 29:e.setState({submitted:!0,sending:!1});case 30:e.setState({validated:!0});case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=s.a.createElement(b.b,{name:"Your Application",text:"Your application has been submitted! Thank you for applying to join BU UPE. Please check your email for a confirmation of your submission. Further details, such as interview timeslots, will be prompted via email and can be entered in this application. If you'd like to edit your submission, simply refresh this page and re-apply.",displayBack:!0});if(i)return f;return s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{title:"Apply",route:"/apply"}),s.a.createElement(b.a,null),s.a.createElement(g.k,null,s.a.createElement("h1",null," Your Application ")),s.a.createElement(g.c,{flexdirection:"row",style:{justifyContent:"center"}},s.a.createElement(g.b,{noValidate:!0,validated:r,onSubmit:c},this.context.roles.hasOwnProperty("applicant")&&this.context.roles.applicant&&s.a.createElement("p",{style:{color:"red",paddingTop:"10px",paddingBottom:"10px"}},"Look's like you've already applied! Feel free to reapply however, just note that it will overwrite your previous submission."),l.questions.sort((function(e,t){return e.order>t.order?1:-1})).map((function(t){return function(t){var a,n=e.state.initialApplicationData,i="";switch(null!==n?i=n.responses.find((function(e){return e.uid===t.uid})).value:"name"===t.uid?i=e.context.name:"email"===t.uid&&(i=e.context.email),t.type){case"textarea":a=s.a.createElement(d.a.Control,{required:t.required,as:"textarea",rows:"3",defaultValue:i});break;case"file":a=s.a.createElement(d.a.File,{id:"custom-file-"+t.uid,label:"Upload file",custom:!0,accept:".pdf",onChange:function(e){return w(e.target)}});break;case"yesno":a=s.a.createElement("div",null,s.a.createElement(d.a.Check,{custom:!0,required:t.required,inline:!0,defaultChecked:i,value:"true",label:"Yes",type:"radio",name:t.uid,id:t.uid+"-1"}),s.a.createElement(d.a.Check,{custom:!0,required:t.required,inline:!0,defaultChecked:!i,value:"false",label:"No",type:"radio",name:t.uid,id:t.uid+"-2"}));break;default:a=s.a.createElement(d.a.Control,{required:t.required,type:t.type,defaultValue:i})}return s.a.createElement(d.a.Row,{style:{width:"100%"},key:t.uid},s.a.createElement(d.a.Group,{controlId:t.uid,style:{width:"100%"}},s.a.createElement(d.a.Label,null,t.name," ",t.required&&s.a.createElement(g.h,null)),a))}(t)})),s.a.createElement(g.i,{paddingRight:"10%",paddingLeft:"10%",paddingTop:"2%",paddingBottom:"2%",type:"submit",disabled:u},u?"Submitting...":"Submit"))))},t}(l.Component);x.contextType=f.AuthUserContext,t.default=Object(u.a)(m.a,Object(f.withAuthorization)(h.c),f.withFirebase)(x)}}]);
//# sourceMappingURL=component---src-pages-apply-js-7b3d9286c68e4daffad1.js.map